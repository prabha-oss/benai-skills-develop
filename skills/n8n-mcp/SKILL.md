---
name: n8n-mcp
description: READ operations and workflow execution via n8n MCP tools. Use when listing workflows, getting workflow details, searching nodes/templates, validating workflows, or executing/testing workflows.
---

# n8n-mcp Skill

**Purpose**: READ operations and workflow execution via n8n MCP tools

---

## Pre-Flight Checklist

Before executing any operation, you MUST verify the setup by reading the `.env` file in the current working directory.

### Step 1: Read .env File

Use the Read tool to check for `.env` in the current working directory:

```
Read .env
```

### Step 2: Verify Configuration

Check that the following variables exist and have values:

| Variable | Required | Description |
|----------|----------|-------------|
| `N8N_API_URL` | Yes | n8n instance URL |
| `N8N_API_KEY` | Yes | n8n API key |
| `N8N_MCP_CONFIGURED` | Yes (must be `true`) | MCP setup verified |

### Step 3: Handle Missing Configuration

If `.env` doesn't exist or is missing required variables, you MUST run the setup sequence:

#### If .env doesn't exist:
Create the file with the template:
```bash
# BenAI n8n Skills Configuration
# Generated by benai-skills plugin

N8N_API_URL=
N8N_API_KEY=
N8N_MCP_CONFIGURED=false
N8N_CREDENTIALS_TEMPLATE_ID=
```

#### If N8N_API_URL or N8N_API_KEY is missing:
Ask the user:
```
Step 1 of 3: n8n API Configuration

Please provide:
1. Your n8n instance URL (e.g., https://your-n8n.app.n8n.cloud)
2. Your n8n API key

You can find your API key in n8n at: Settings → API → Create API Key
```

After user provides values, update `.env` with the values.

#### If N8N_MCP_CONFIGURED is not "true":
Guide the user:
```
Step 2 of 3: n8n MCP Server Setup

Add the following to your Claude MCP configuration:

For Claude Desktop (~/Library/Application Support/Claude/claude_desktop_config.json):
{
  "mcpServers": {
    "n8n-mcp": {
      "command": "npx",
      "args": ["-y", "@n8n/mcp-server"],
      "env": {
        "N8N_API_URL": "<your-n8n-url>",
        "N8N_API_KEY": "<your-n8n-api-key>"
      }
    }
  }
}

For Claude Code (~/.claude/settings.json):
{
  "mcpServers": {
    "n8n-mcp": {
      "command": "npx",
      "args": ["-y", "@n8n/mcp-server"],
      "env": {
        "N8N_API_URL": "<your-n8n-url>",
        "N8N_API_KEY": "<your-n8n-api-key>"
      }
    }
  }
}

After adding the configuration, restart Claude and confirm.
```

After user confirms, verify MCP is working by calling `mcp__n8n-mcp__n8n_health_check`. If successful, update `.env`:
```
N8N_MCP_CONFIGURED=true
```

---

## Available Operations

Once setup is verified, you can use the following n8n MCP tools:

### Workflow Operations

| Operation | MCP Tool | Description |
|-----------|----------|-------------|
| List workflows | `mcp__n8n-mcp__n8n_list_workflows` | Get all workflows (minimal metadata) |
| Get workflow | `mcp__n8n-mcp__n8n_get_workflow` | Get workflow details by ID |
| Validate workflow | `mcp__n8n-mcp__n8n_validate_workflow` | Validate workflow by ID |
| Test workflow | `mcp__n8n-mcp__n8n_test_workflow` | Execute/trigger a workflow |
| Get executions | `mcp__n8n-mcp__n8n_executions` | List or get execution details |
| Health check | `mcp__n8n-mcp__n8n_health_check` | Check n8n instance connectivity |

### Node & Template Operations

| Operation | MCP Tool | Description |
|-----------|----------|-------------|
| Search nodes | `mcp__n8n-mcp__search_nodes` | Search for n8n nodes by keyword |
| Get node info | `mcp__n8n-mcp__get_node` | Get detailed node information |
| Search templates | `mcp__n8n-mcp__search_templates` | Search workflow templates |
| Get template | `mcp__n8n-mcp__get_template` | Get template by ID |
| Validate node | `mcp__n8n-mcp__validate_node` | Validate node configuration |

### Validation Operations

| Operation | MCP Tool | Description |
|-----------|----------|-------------|
| Validate workflow JSON | `mcp__n8n-mcp__validate_workflow` | Validate workflow structure |
| Autofix workflow | `mcp__n8n-mcp__n8n_autofix_workflow` | Auto-fix common issues |

---

## Usage Patterns

### List All Workflows
```
mcp__n8n-mcp__n8n_list_workflows()
```

### Get Workflow Details
```
mcp__n8n-mcp__n8n_get_workflow(id: "workflow-id", mode: "full")
```

### Search for Nodes
```
mcp__n8n-mcp__search_nodes(query: "slack", includeExamples: true)
```

### Get Node Configuration Help
```
mcp__n8n-mcp__get_node(nodeType: "n8n-nodes-base.slack", detail: "standard")
```

### Test a Workflow (Webhook Trigger)
```
mcp__n8n-mcp__n8n_test_workflow(
  workflowId: "workflow-id",
  triggerType: "webhook",
  data: { "key": "value" }
)
```

### Get Execution Results
```
mcp__n8n-mcp__n8n_executions(
  action: "get",
  id: "execution-id",
  mode: "summary"
)
```

---

## Error Handling

If MCP tools are not available:
1. Verify `N8N_MCP_CONFIGURED=true` in `.env`
2. Ask user to restart Claude after MCP configuration
3. Re-run the MCP verification step

If API errors occur:
1. Check `N8N_API_URL` is correct (no trailing slash)
2. Check `N8N_API_KEY` is valid and has appropriate permissions
3. Verify n8n instance is running and accessible

---

## Quick Reference

**This skill is for READ operations only.**

For WRITE operations (create, update, delete workflows), use the `n8n-api` skill.
For credentials management, use the `n8n-credentials` skill.
